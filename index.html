<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Untukmu üíñ</title>

<style>
body{
    margin:0;
    overflow:hidden;
    font-family: 'Segoe UI', sans-serif;
    background: radial-gradient(circle at top, #14001f, #000);
    color:white;
    text-align:center;
}

.container{
    position:relative;
    z-index:2;
    margin-top:20vh;
}

h2{
    font-weight:300;
    animation:fadeIn 1.5s ease;
}

button{
    padding:10px 20px;
    border:none;
    border-radius:30px;
    background:linear-gradient(45deg,#ff0066,#ff4da6);
    color:white;
    margin:10px;
    cursor:pointer;
    transition:0.3s;
}

button:hover{
    transform:scale(1.1);
    box-shadow:0 0 20px #ff4da6;
}

input{
    padding:8px;
    border-radius:10px;
    border:none;
    text-align:center;
}

.hidden{display:none;}

.failed{
    color:red;
    font-weight:bold;
    animation:glitch 0.4s infinite;
}

@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
}

@keyframes glitch{
    0%{text-shadow:2px 0 red;}
    50%{text-shadow:-2px 0 blue;}
    100%{text-shadow:2px 0 red;}
}

.flower{
    position:absolute;
    top:-20px;
    font-size:20px;
    animation:fall linear infinite;
}

@keyframes fall{
    to{transform:translateY(110vh);}
}

.heartbeat{
    animation:beat 1.5s infinite;
}

@keyframes beat{
    0%{transform:scale(1);}
    25%{transform:scale(1.05);}
    50%{transform:scale(1);}
    75%{transform:scale(1.05);}
    100%{transform:scale(1);}
}

video{
    width:80%;
    max-height:40vh; /* FIX agar tombol tidak terdorong terlalu bawah */
    border-radius:20px;
    margin-top:20px;
    box-shadow:0 0 30px #ff4da6;
}

/* FIX posisi tombol setelah video */
#page4{
    margin-top:4vh;
}

#afterVideo{
    margin-top:20px;
    position:relative;
    z-index:3;
}
</style>
</head>
<body>

<audio id="bgm" loop>
<source src="music.mp3" type="audio/mpeg">
</audio>

<div class="container">

<div id="page1">
<h2 class="heartbeat">Adakah aku dihati mu??</h2>
<div id="btn1" class="hidden">
<button onclick="yes1()">Ya üíñ</button>
<button id="noBtn" onclick="moveNo()" ontouchstart="moveNo()">Tidak üòè</button>
</div>
</div>

<div id="page2" class="hidden">
<h2>Siapa nama lengkap ku?</h2>
<input id="kode">
<br>
<button onclick="checkKode()">Submit</button>
<p id="resultKode"></p>
</div>

<div id="page3" class="hidden">
<h2>Dimana lokasi pertama ngDate?</h2>
<input id="jawaban">
<br>
<button onclick="checkJawaban()">Submit</button>
<p id="resultJawaban"></p>
</div>

<div id="page4" class="hidden">
<h1>Untukmu üíå</h1>
<video id="video" controls playsinline preload="auto">
<source src="video.mp4" type="video/mp4">
</video>

<div id="afterVideo" class="hidden">
<br>
<a href="https://wa.me/6281384940398?text=Yes,%20I%20do">
<button>Yes, I Do üíö</button>
</a>
<button onclick="replay()">Putar Ulang üé¨</button>
<button onclick="restart()">Restart üîÅ</button>
</div>
</div>

</div>

<script>

window.onload=function(){
setTimeout(()=>{document.getElementById("btn1").classList.remove("hidden")},1000);
createFlowers();

document.getElementById("kode").addEventListener("keypress",function(e){
if(e.key==="Enter"){checkKode();}
});

document.getElementById("jawaban").addEventListener("keypress",function(e){
if(e.key==="Enter"){checkJawaban();}
});
}

function createFlowers(){
for(let i=0;i<20;i++){
let flower=document.createElement("div");
flower.className="flower";
flower.innerHTML="üå∏";
flower.style.left=Math.random()*100+"vw";
flower.style.animationDuration=(5+Math.random()*5)+"s";
document.body.appendChild(flower);
}
}

function moveNo(){
let btn=document.getElementById("noBtn");
btn.style.position="fixed";
let maxX = window.innerWidth - btn.offsetWidth;
let maxY = window.innerHeight - btn.offsetHeight;
btn.style.left = Math.random()*maxX + "px";
btn.style.top = Math.random()*maxY + "px";
}

function yes1(){
let music=document.getElementById("bgm");
music.volume=0.3;
music.play().catch(()=>{});
hideAll();
show("page2");
}

function fadeOutMusic(music){
let fade=setInterval(()=>{
if(music.volume>0.05){
music.volume-=0.05;
}else{
clearInterval(fade);
music.pause();
music.volume=0.3;
}
},100);
}

function fadeInMusic(music){
music.volume=0;
music.play().catch(()=>{});
let fade=setInterval(()=>{
if(music.volume<0.3){
music.volume+=0.05;
}else{
clearInterval(fade);
}
},100);
}

function checkKode(){
let input=document.getElementById("kode").value.trim().toLowerCase();

if(input==="rizky purwa setia"){
hideAll();
show("page3");
confetti();
}else{
document.getElementById("resultKode").innerHTML=
`<span class="salah">SALAH!!!</span><br>
<button onclick="restart()">Restart</button>`;
}
}

function checkJawaban(){
let jawaban=document.getElementById("jawaban").value.trim().toUpperCase();

if(jawaban==="ROYAL"){
hideAll();
show("page4");

let v=document.getElementById("video");
let music=document.getElementById("bgm");

fadeOutMusic(music);

v.currentTime=0;
v.play().catch(()=>{});

v.onended=function(){
document.getElementById("afterVideo").classList.remove("hidden");
fadeInMusic(music);
};

}else{
document.getElementById("resultJawaban").innerHTML=
`<span class="failed">KOK GA INGET!!!</span><br>
<button onclick="restart()">Restart</button>`;
}
}

function confetti(){
for(let i=0;i<30;i++){
let c=document.createElement("div");
c.innerHTML="üéâ";
c.style.position="absolute";
c.style.left=Math.random()*100+"vw";
c.style.top=Math.random()*100+"vh";
c.style.fontSize="20px";
document.body.appendChild(c);
setTimeout(()=>c.remove(),1000);
}
}

function replay(){
let v=document.getElementById("video");
let music=document.getElementById("bgm");

fadeOutMusic(music);

v.currentTime=0;
v.play();

v.onended=function(){
document.getElementById("afterVideo").classList.remove("hidden");
fadeInMusic(music);
};
}

function restart(){
location.reload();
}

function hideAll(){
["page1","page2","page3","page4"].forEach(id=>{
document.getElementById(id).classList.add("hidden");
});
}

function show(id){
document.getElementById(id).classList.remove("hidden");
}
</script>

</body>
</html>
